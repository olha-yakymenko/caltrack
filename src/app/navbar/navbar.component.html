<nav>
    <a routerLink="/" 
       routerLinkActive="active" 
       [routerLinkActiveOptions]="{ exact: true }"
       [appDisabledIfInactive]="true">  
      Home
    </a>
    
    <a routerLink="/info" 
       routerLinkActive="active" 
       [routerLinkActiveOptions]="{ exact: true }"
       [appDisabledIfInactive]="true">  
      Info
    </a>
    
    <a routerLink="/meal/list" 
       routerLinkActive="active" 
       [routerLinkActiveOptions]="{ exact: true }"
       [appDisabledIfInactive]="true">  
      Lista posiÅ‚kÃ³w
    </a>
    
    <a routerLink="/meal/form" 
       routerLinkActive="active" 
       [routerLinkActiveOptions]="{ exact: true }"
       [appDisabledIfInactive]="true">  
      Dodaj posiÅ‚ek
    </a>
    
    <button (click)="back()">  
      Cofnij
    </button>

    @if (authService.currentUser$ | async; as user) {
      <div>Witaj, <strong>{{ user.name }}</strong> ({{ user.email }})</div>
      
      @if (user.role === 'admin') {
        <a routerLink="/admin" [appDisabledIfInactive]="true">  
          Panel Admina
        </a>
      }
      
      <button 
        class="settings-btn"
        (click)="openSettings()"
        aria-label="Ustawienia uÅ¼ytkownika"
        title="Edytuj dane uÅ¼ytkownika"
        [appDisabledIfInactive]="true"  
      >
        âš™ï¸
      </button>


      <button 
    class="theme-toggle"
    (click)="toggleTheme()"
    [attr.aria-label]="isDarkTheme ? 'PrzeÅ‚Ä…cz na tryb jasny' : 'PrzeÅ‚Ä…cz na tryb ciemny'"
    [title]="isDarkTheme ? 'PrzeÅ‚Ä…cz na tryb jasny' : 'PrzeÅ‚Ä…cz na tryb ciemny'"
  >
    <span class="theme-toggle-icon" [class.dark]="isDarkTheme">
      {{ isDarkTheme ? 'ğŸŒ™' : 'â˜€ï¸' }}
    </span>
    <span class="theme-toggle-text">
      {{ isDarkTheme ? 'Tryb ciemny' : 'Tryb jasny' }}
    </span>
  </button>

      <button (click)="authService.logout()" >  
        Wyloguj
      </button>
    } @else {
      <a routerLink="/login">Zaloguj siÄ™</a>
    }
</nav>

@if (showSettings && userSettings.name && userSettings.email) {
  <app-user-settings
    [name]="userSettings.name"
    [email]="userSettings.email"
    (save)="saveUserSettings($event)"
    (closed)="closeSettings()"
  ></app-user-settings>
}

<router-outlet></router-outlet>