@if (isVisible) {
  <div 
    class="modal-overlay" 
    tabindex="0" 
    (click)="close()" 
    (keydown.enter)="close()" 
    (keydown.space)="close()"
    role="dialog"
    aria-modal="true"
    aria-labelledby="modal-title"
    [attr.aria-describedby]="details ? 'modal-details' : 'modal-message'"
  >
    <div 
      class="modal-content" 
      tabindex="-1" 
      (click)="$event.stopPropagation()"
      (keydown.enter)="$event.stopPropagation()"
      (keydown.space)="$event.stopPropagation()"
    >
      <div class="modal-header">
        <h3 id="modal-title">{{ title }}</h3>
        <button 
          class="close-btn" 
          (click)="close()"
          (keydown.enter)="close()"
          (keydown.space)="close()"
          aria-label="Zamknij modal"
        >
          &times;
        </button>
      </div>
      
      <div class="modal-body">
        <p id="modal-message">{{ message }}</p>
        @if (details) {
          <p id="modal-details" class="modal-details">{{ details }}</p>
        }
      </div>
      
      <div class="modal-footer">
        <button 
          class="btn btn-cancel" 
          (click)="cancel()"
          (keydown.enter)="cancel()"
          (keydown.space)="cancel()"
          [attr.aria-label]="'Anuluj: ' + cancelText"
        >
          {{ cancelText }}
        </button>
        <button 
          class="btn btn-confirm" 
          (click)="confirm()"
          (keydown.enter)="confirm()"
          (keydown.space)="confirm()"
          [attr.aria-label]="'PotwierdÅº: ' + confirmText"
        >
          {{ confirmText }}
        </button>
      </div>
    </div>
  </div>
}